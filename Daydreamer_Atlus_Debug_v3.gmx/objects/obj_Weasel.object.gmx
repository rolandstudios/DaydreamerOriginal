<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_Weasel_Idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-3</depth>
  <persistent>-1</persistent>
  <parentName>par_Goodguy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_sound_pitch(snd_Weasel_Force,global.game_speed);
audio_play_sound(snd_Weasel_Force,10,false);
sprite_index=spr_Weasel_Idle;

store=false;
image_angle=5;
scale=.8;
image_yscale=scale;

hp=100;
damage=0;
heal=false;
frame=0;
casting=false;
quiting=false;
move=0;
leaving_xscale=image_xscale;
part=55*par_HERO.image_xscale;
angle=0;
max_part=150;
cast_x=x;
cast_y=y;
cast_xscale=image_xscale;
catchup=false;
alarm[0]=200/global.game_speed;
enemy=noone;

float=false;
float_up=true;
rot_up=true;
float_factor=0;
image_blend=c_white;

//Color Correction----
brightness=-.04; //brightness
contrast=0; //contrast
//--------------------
color=c_white;
hit=false;

msize = 10;
mx = ds_queue_create();
my = ds_queue_create();
ms = ds_queue_create();
ma = ds_queue_create();


for(i=0;i&lt;msize;i+=1)
{
    ds_queue_enqueue(mx,par_HERO.x);
    ds_queue_enqueue(my,y);
    ds_queue_enqueue(ma,angle);
    ds_queue_enqueue(ms,sprite_index);
   
}


//alpha_test=128;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(par_HERO) par_HERO.summon=false;
instance_create(x,y+25,obj_Twinkle_A);
if instance_exists(obj_warps) obj_warps.Money_low=false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hit=false;
color=c_white;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>catchup=true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>talking=false;
audio_play_sound(snd_electrical_glitch,10,false);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>par_HERO.summon=false;
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//QUIT IF NO MONEY
var stall
stall =false;
if (global.CutScene)stall=true;
if instance_exists(par_Activate) stall=true;
if instance_exists(obj_Inventory) stall=true;

if (stall) {alarm[0]=30;}else{

if instance_exists(par_HERO) 
{
if instance_exists(par_Enemy_Body)
{
if (casting==false)
{
if (par_HERO.money&lt;5)  
{
    quiting=true;
    image_speed=.5*global.game_speed;
    image_index=0;
    if (alarm[1]==-1) alarm[1]= 200/global.game_speed;
    alarm[2]= 55/global.game_speed;
    talking=true;
    leaving_x=ds_queue_dequeue(mx)-(45*par_HERO.image_xscale);
    image_xscale=par_HERO.image_xscale;
    leaving_y=ds_queue_dequeue(my)+55;
    leaving_xscale=image_xscale;
    
    if (par_HERO.grounded==false) 
        {
        float=true;
        }
        
        
    if !instance_exists(obj_TextPromt)
    {
        global.promt = "Not Enough PSY Matter!";
        with instance_create(x+32,y-32,obj_TextPromt)
            {
            hold=100;
            type=2;
            }
    }
}
else
{
par_HERO.money-=5;
cast_x=x;
cast_y=y;
casting=true;
enemy = instance_nearest(x,y,par_Enemy_Body);
//slashes=irandom_range(1,3);
slashes=2;
lockon=false;
angle=0;
//audio_play_sound(snd_Calling_all_Weasels,10,false);
}
}

if (par_HERO.money&lt;10)
{ 
if instance_exists(obj_warps)
    obj_warps.Money_low=true;
}
}
}
else
{
instance_destroy();
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !instance_exists(par_HERO) {instance_destroy();}
else
{
//image_index = ds_queue_dequeue(ma);
// Queue the NEXT location

if (quiting==false) //IF NOT QUITING -----------------------------------
{
if instance_exists(obj_PearStore_inside)
{
    if (store==false)
    {
    ds_queue_clear(mx);
    ds_queue_clear(my);
    ds_queue_clear(ma);
    ds_queue_clear(ms);
    
        for(i=0;i&lt;msize;i+=1)
        {
            ds_queue_enqueue(mx,par_HERO.x);
            ds_queue_enqueue(my,par_HERO.y);
            ds_queue_enqueue(ma,image_angle);
            ds_queue_enqueue(ms,sprite_index);           
        }
    }
store=true;
}
else
{
    if (store==true)
    {
    ds_queue_clear(mx);
    ds_queue_clear(my);
    ds_queue_clear(ma);
    ds_queue_clear(ms);
    
        for(i=0;i&lt;msize;i+=1)
        {
            ds_queue_enqueue(mx,par_HERO.x);
            ds_queue_enqueue(my,par_HERO.y);
            ds_queue_enqueue(ma,image_angle);
            ds_queue_enqueue(ms,sprite_index);           
        }
    }
store=false;
}
if (casting==false) //IF NOT CASTING -----------------------------------
{
    damage=0;
    sprite_index = ds_queue_dequeue(ms);
   //POSITION QUEUE
    x = ds_queue_dequeue(mx)-(part);
    y = ds_queue_dequeue(my);
    angle = ds_queue_dequeue(ma);
    
    ds_queue_enqueue(mx,par_HERO.x);
    ds_queue_enqueue(ma,par_HERO.angle);
    
    
    if (global.HERO_type==1) &amp;&amp; (par_HERO.ladder)
    ds_queue_enqueue(my,par_HERO.y-5.5*par_HERO.ladder_climb+1);
    else
    ds_queue_enqueue(my,par_HERO.y);
    
    
    
    
    if (par_HERO.grounded)
    {
    last_grounded_x=par_HERO.x;
    last_grounded_y=par_HERO.y;
    }
    
    image_xscale=par_HERO.image_xscale;
    
    //image_xscale=-sign(part);
   if (par_HERO.hsp!=0) 
   {
       
        if (par_HERO.image_xscale== -1)
        {
        if (part&gt;-(max_part)) part -=2;
        if (x&gt;par_HERO.x) image_xscale=1;
        }
        else
        {
        if (part&lt;max_part) part +=2;
        if (x&lt;par_HERO.x) image_xscale=-1;
        }
        
    }
    else
    {
    if (abs(part)&gt;50)
        {
        part-=2*sign(part);
        }
    }
//SET SPRITE


if (global.HERO_type==0) //YOUNG OLIVIA
{
    if (par_HERO.sprite_index==spr_Young_Olivia_Jump_Kick) || (par_HERO.sprite_index==spr_Young_Olivia_Jump_A) 
    || (par_HERO.sprite_index==spr_Young_Olivia_Jump_B) || (par_HERO.sprite_index==spr_Young_Olivia_Diagnal_Shoot_Split) 
    || (par_HERO.sprite_index==spr_Young_Olivia_Shoot_Down_Split) ||  (par_HERO.sprite_index==spr_Young_Olivia_Wall_Bounce)
    {
        ds_queue_enqueue(ms,spr_Weasel_Jump);
    }
    else if (par_HERO.sprite_index==spr_Young_Olivia_Ladder)
    {
        ds_queue_enqueue(ms,spr_Weasel_Ladder);
        image_index=abs(par_HERO.image_index/3);
        part=0;
    }
    else if (par_HERO.sprite_index==spr_Young_Olivia_Run)
    {
        ds_queue_enqueue(ms,spr_Weasel_Walk);
    }
    else if (par_HERO.sprite_index==spr_Young_Olivia_Die_Air)
    {
        ds_queue_enqueue(ms,spr_Weasel_Jump);
    }
    else
    {
        ds_queue_enqueue(ms,spr_Weasel_Idle);
    }
}

if (global.HERO_type==1) //OLD OLIVIA
{
    if (par_HERO.sprite_index==spr_Old_Olivia_Jump_Kick) || (par_HERO.sprite_index==spr_Old_Olivia_Jump_A) 
    || (par_HERO.sprite_index==spr_Old_Olivia_Jump_B) || (par_HERO.sprite_index==spr_Old_Olivia_Diagnal_Shoot_Split) 
    || (par_HERO.sprite_index==spr_Old_Olivia_Shoot_Down_Split) ||  (par_HERO.sprite_index==spr_Old_Olivia_Wall_Bounce)
    {
        ds_queue_enqueue(ms,spr_Weasel_Jump);
    }
    else if (par_HERO.sprite_index==spr_Old_Olivia_Ladder) || (par_HERO.sprite_index==spr_Old_Olivia_Ladder_Climb)
    {
        ds_queue_enqueue(ms,spr_Weasel_Ladder);
        image_index=abs(par_HERO.image_index/3);
        part=0;
    }
    else if (par_HERO.sprite_index==spr_Old_Olivia_Run)
    {
        ds_queue_enqueue(ms,spr_Weasel_Walk);
    }
    else if (par_HERO.sprite_index==spr_Old_Olivia_Die_Air)
    {
        ds_queue_enqueue(ms,spr_Weasel_Jump);
    }
    else
    {
        ds_queue_enqueue(ms,spr_Weasel_Idle);
    }
}


if(sprite_index == spr_Weasel_Walk) 
    image_speed=2*global.game_speed;
    else
    image_speed=1*global.game_speed;
    
//SPRITE OVERIDES ----
 if (sprite_index==spr_Weasel_Idle)
        { 
        if (abs(part)&gt;50)
            {
             sprite_index=spr_Weasel_Walk;
             image_speed=.5*global.game_speed;
            }
        else
        image_speed=.75*global.game_speed;
        } 
        

if(sprite_index == spr_Weasel_Idle) 
    image_speed=.75*global.game_speed;

if(sprite_index == spr_Weasel_Idle)
    {
    if (image_index&gt;=34) image_speed=0;
    }

}//END NOT CASTING ------
else
{//CASTING START --------
alarm[0]=300/global.game_speed;   
       
    x = cast_x;
    y = cast_y;  
        
if !instance_exists(enemy) catchup=true;

if (!catchup)  
{
            if (!lockon) //SEEKING TARGET ------------------
            {
            sprite_index = spr_Weasel_Run;
                        
            if (enemy.x&gt;cast_x) //GOING LEFT -------
                {
                        if (enemy.x&gt;cast_x+10) cast_x+=15; 
                        image_xscale=1;
                }
                else 
                {
                        if (enemy.x&lt;cast_x-10) cast_x-=15;
                        image_xscale=-1;
                }
                
                
            if (enemy.y&gt;cast_y) //GOING RIGHT -------
                {
                     if (enemy.y&gt;cast_y+5) cast_y+=8;
                } 
                else 
                {
                     if (enemy.y&lt;cast_y-5) cast_y-=8;
                }                          
            
            if (enemy.x&gt;x)
            angle=point_direction(x,y,enemy.x,enemy.y)+10; //edit
            else
            angle=point_direction(x,y,enemy.x,enemy.y)-10+180; //edit
                
            }
            else
            {
            audio_sound_pitch(snd_Weasel_Attack,global.game_speed);
            if !audio_is_playing(snd_Weasel_Attack)  audio_play_sound(snd_Weasel_Attack,10,false);
            if (image_index==30) || (image_index==20) || (image_index==25) || (image_index==10) //DO DAMAGE
                {
                with instance_create(x,y,obj_ShootA)
                    {
                    damage=irandom_range(8,12)*global.pets[3]*.5;
                    visible=false;
                    image_xscale=2;
                    image_yscale=2;
                    type=2;
                    image_alpha=0;
                    //s_speed=0;
                    }
                }
                
            depth=enemy.depth-1;
            x=enemy.x;
            y=enemy.y;
            cast_x=enemy.x;
            cast_y=enemy.y;
            sprite_index=spr_Weasel_Slash
            image_speed=.75*global.game_speed;
            }
        
            
        if (cast_x&gt;enemy.x-12)&amp;&amp;(cast_x&lt;enemy.x+12) //IF BACK IN LINE
        {   
        if (cast_y&gt;enemy.y-12)&amp;&amp;(cast_y&lt;enemy.y+12)
            {
                if (!lockon)
                {
                 sprite_index=spr_Weasel_Slash;
                 image_speed=.5*global.game_speed;
                 image_index=0;
                 lockon=true;
                 alarm[3]=150/global.game_speed;
                }
            }
        }
    
    

}//END NOT CATCHUP
else //CATCHUP START --------------------
{
    damage=0;
    sprite_index = spr_Weasel_Run; 
    image_xscale=par_HERO.image_xscale;
    depth=-3;
    
            if (par_HERO.x&gt;x)
            angle=point_direction(x,y,par_HERO.x,par_HERO.y)+10; //edit
            else
            angle=point_direction(x,y,par_HERO.x,par_HERO.y)-10+180; //edit
    
       
if (cast_x&gt;par_HERO.x-17)&amp;&amp;(cast_x&lt;par_HERO.x+17) //IF BACK IN LINE
    {   
        if (cast_y&gt;par_HERO.y-12)&amp;&amp;(cast_y&lt;par_HERO.y+12)
        {
        casting=false;
        catchup=false;  
        image_angle=0;
        angle=0;  
        part=0;
        x=par_HERO.x;
        y=par_HERO.y;
        cast_x=par_HERO.x;
        cast_y=par_HERO.y;
        enemy=noone;
        
        ds_queue_clear(ma);
        ds_queue_clear(ms);
        ds_queue_clear(mx);
        ds_queue_clear(my);
        
        ds_queue_enqueue(ms,spr_Weasel_Walk);
        
        alarm[0]=irandom_range(100,150)/global.game_speed;
            
            for(i=0;i&lt;msize;i+=1)
            {
            ds_queue_enqueue(ma,angle);
            ds_queue_enqueue(mx,x);
            ds_queue_enqueue(my,y);
            ds_queue_enqueue(ms,sprite_index);
            }
           
        //audio_play_sound(snd_Got_special_A,10,false);
        }
    }
    else
    {
            if (cast_x&lt;par_HERO.x)
                {
                cast_x+=15;
                image_xscale=1;
                }

            if (cast_x&gt;par_HERO.x)
                {
                cast_x-=15;
                image_xscale=-1;
                } 
    }
    
    if (par_HERO.y&gt;cast_y)
    {
        if (par_HERO.y&gt;cast_y+5)cast_y+=8;
    }
    else
    {
        if (par_HERO.y&lt;cast_y-5) cast_y-=8;
    }

}//END CATCHUP
        
}//END CASTING ----------

} //END NOT QUITING --------------------
else
{ //QUITING START ----------------------


    if (!float)
        {
        sprite_index=spr_Weasel_Idle;
        ds_queue_enqueue(ms,spr_Weasel_Idle);
        }
        else
        {
        sprite_index=spr_Weasel_Idle;
        ds_queue_enqueue(ms,spr_Weasel_Idle)
        }
  
    
                if(float) 
                {
                    if(float_up) float_factor=float_factor+.1;
                    if(!float_up) float_factor=float_factor-.1;
        
                    if(float_factor==2) float_up=false;
                    if(float_factor==-2) float_up=true;
                    leaving_y = leaving_y + float_factor;
                }
                
          
                
}//END QUITING
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="par_Enemy">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (alarm[4]==-1)
{
//audio_sound_pitch(snd_Quack_B,random_range(.8,1.2)*global.game_speed);
//audio_sound_gain(snd_Quack_A,1,0);
//audio_play_sound(snd_Quack_B,10,false);
alarm[4]=20;
hit=true;
color=c_red;
hp-=1;
//sprite_index=spr_Duck_Hit;
//image_speed=.5*global.game_speed;
//image_index=0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(par_HERO)
{
    alarm[0]=200/global.game_speed;
    
    x=par_HERO.x;
    y=par_HERO.y;
    
    for(i=0;i&lt;msize;i+=1)
    {
        ds_queue_enqueue(mx,par_HERO.x);
        ds_queue_enqueue(my,par_HERO.y);
        ds_queue_enqueue(ma,par_HERO.angle);
        ds_queue_enqueue(ms,spr_Weasel_Idle);   
    }
}
else
{
    instance_destroy();
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

//image_blend=c_ltgray;
image_blend=make_color_hsv(0,0,210);

if sprite_exists(sprite_index)
{
if(quiting==false) //IF NOT QUITING ----
{

if (!casting) 
image_xscale=par_HERO.image_xscale;
else
part=0;

if (casting) // IF CASTING ----
{
    if (lockon) &amp;&amp; (!catchup) 
    {   
        //ATTACKING DRAW
        if instance_exists(enemy)
        {
          shader_set(shd_bright_contrast);
          shader_set_uniform_f(global.brightness_amount , brightness);
          shader_set_uniform_f(global.contrast_amount, contrast);
          draw_sprite_ext(sprite_index, image_index, enemy.x , enemy.y, sign(enemy.image_xscale)*scale,scale, angle, image_blend, 1.0);
          shader_reset();
        }
    }
    else
    {            
            if(catchup) &amp;&amp; instance_exists(enemy)
            {
              
               if(enemy.x&gt;x)
               { 
                if (enemy.y&lt;y) &amp;&amp; (angle&lt;30)  angle+=.5;
                if (enemy.y&gt;y) &amp;&amp; (angle&gt;-30) angle-=.5;    
               }
               else
               { 
                if (enemy.y&lt;y) &amp;&amp; (angle&gt;-30) angle-=.5;
                if (enemy.y&gt;y) &amp;&amp; (angle&lt;30)  angle+=.5;  
               }
               
            }
            else
            {
              
               
               //if(sign(image_xscale)==1)
               if(par_HERO.x&gt;x)
               { 
                if (par_HERO.y&lt;y) &amp;&amp; (angle&lt;30)  angle+=.5;
                if (par_HERO.y&gt;y) &amp;&amp; (angle&gt;-30) angle-=.5;    
               }
               else
               { 
                if (par_HERO.y&lt;y) &amp;&amp; (angle&gt;-30) angle-=.5;
                if (par_HERO.y&gt;y) &amp;&amp; (angle&lt;30)  angle+=.5;  
               }   
            
            }
            
            image_angle=(angle)+(5*image_xscale);
            
            //image_angle=(angle*image_xscale)+(5*image_xscale);
            
        //TARGETING DRAW
          shader_set(shd_bright_contrast);
          shader_set_uniform_f(global.brightness_amount , brightness);
          shader_set_uniform_f(global.contrast_amount, contrast);
         draw_sprite_ext(sprite_index, image_index, x , y, image_xscale*scale,scale, angle, image_blend, 1.0);
          shader_reset();
    }
}
else
{
// IF LADDER ----
if (par_HERO.ladder=false)
{
          image_angle=5*par_HERO.image_xscale; //NORMAL DRAW
          
          if (color==c_red) //HIT DRAW
          {         
          draw_sprite_ext(sprite_index, image_index, x, y+48, image_xscale*scale,scale, angle, color, 1.0);
          }
          else
          {
          shader_set(shd_bright_contrast);
          shader_set_uniform_f(global.brightness_amount , brightness);
          shader_set_uniform_f(global.contrast_amount, contrast);
          draw_sprite_ext(sprite_index, image_index, x , y+48, image_xscale*scale,scale, angle, image_blend, 1.0);
          shader_reset();
          }
}
else
{
          
    if (color==c_red) //HIT DRAW
    {
          image_angle=0; //LADDER DRAW          
          part=0;
          draw_sprite_ext(sprite_index, image_index, par_HERO.x, y+100, image_xscale*scale,scale, angle, color, 1.0);
    }
    else
    {
          part=0;
          image_angle=0; //LADDER DRAW
          shader_set(shd_bright_contrast);
          shader_set_uniform_f(global.brightness_amount , brightness);
          shader_set_uniform_f(global.contrast_amount, contrast);
          draw_sprite_ext(sprite_index, image_index, par_HERO.x, y+100, image_xscale*scale,scale, angle, image_blend, 1.0);
          shader_reset();
    }
          
}
}


}
else //IF QUITING -----------------------------------
{
     //QUITING DRAW
      x=leaving_x;
      y=leaving_y;
      image_yscale=scale;
      image_xscale=scale*sign(image_xscale);
    
    move+=0.04;
    //image_blend=c_white;
    
    
    image_alpha=image_alpha-.01;;
    var Stripes = shader_get_uniform(shdr_Hologram,"Stripes");
    var Filter = shader_get_uniform(shdr_Hologram,"Filter");
    var Phase = shader_get_uniform(shdr_Hologram,"Phase");
    
    draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,angle,image_blend,image_angle);
    shader_set(shdr_Hologram);
    shader_set_uniform_f(Stripes,500.0);
    shader_set_uniform_f(Filter,0.98,0.98,0.98,1.0);//rgba diffuse color
    shader_set_uniform_f(Phase,move);
    draw_sprite_ext(sprite_index, image_index, leaving_x, leaving_y, sign(image_xscale)*scale,scale, angle, image_blend, 1.0); 
    shader_reset(); 
       
}
}//END IF SPRITE EXISTS

/*
draw_text(x,y-150,"part: "+string(part));
draw_text(x,y-125,"angle: "+string(image_angle));
draw_text(x,y-100,"alarm[0]: "+string(alarm[0]));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>82,82</point>
  </PhysicsShapePoints>
</object>
