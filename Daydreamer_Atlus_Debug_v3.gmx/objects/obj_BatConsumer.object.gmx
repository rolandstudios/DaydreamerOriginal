<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-11</depth>
  <persistent>0</persistent>
  <parentName>par_Enemy_Body</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Load Sprites ----------------------

if(master.Bat_Consumer__Skinney_Fly_A==0)
{
master.num+=1;
master.Bat_Consumer__Skinney_Fly_A=master.num;
global.sprite[master.num]=sprite_add(working_directory+"\Imports\Bat_Consumer__Skinney_Fly_A.png",25,0,1,68,92);
sprite_collision_mask(global.sprite[master.num], 1, 0, 0, 0, sprite_width, sprite_height,0,225);
}

if(master.Bat_Consumer__Skinney_Fly_B==0)
{
master.num+=1;
master.Bat_Consumer__Skinney_Fly_B=master.num;
global.sprite[master.num]=sprite_add(working_directory+"\Imports\Bat_Consumer__Skinney_Fly_B.png",25,0,1,72,108);
sprite_collision_mask(global.sprite[master.num], 1, 0, 0, 0, sprite_width, sprite_height,0,225);
}

if(master.Bat_Consumer__Skinney_Fire_A==0)
{
master.num+=1;
master.Bat_Consumer__Skinney_Fire_A=master.num;
global.sprite[master.num]=sprite_add(working_directory+"\Imports\Bat_Consumer__Skinney_Fire_A.png",25,0,1,74,95);
sprite_collision_mask(global.sprite[master.num], 1, 0, 0, 0, sprite_width, sprite_height,0,225);
}

blue=false;
burn=false;
scale = image_xscale;
scale=scale*random_range(.7,1.3)
image_xscale=scale;
image_yscale=scale;
hp=8*scale;
init_hp=hp;
rest=false;
activate=false;

west_east = 0;
setspeed = 3 + random_range(1,5);
hsp=0;
vsp=0;
type=1;


image_speed=.5
damage=4*scale*global.difficulty;
moveChoose=true;
moveChoice=1;
acel=0;
fire=false;
kickback=0;
can_fire=true;

dont_move=false;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (hp&lt;=0) global.Points+=irandom_range(5,10);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>burn=false;
image_blend=c_white
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>can_fire=true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>kickback=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>moveChoose=true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>543</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sprite_color</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>13</kind>
            <string>16777215</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>1</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>211</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_sound</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>6</kind>
            <sound>snd_EnemyHit_A</sound>
          </argument>
          <argument>
            <kind>3</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !instance_exists(par_HERO) {instance_destroy();}
else
{
if (hp&lt;=0)
{
audio_sound_pitch(snd_batdie,random_range(.9,1.1)*global.game_speed);
audio_play_sound(snd_batdie,10,false);
with instance_create(x,y,obj_BloodSplash)
{
image_xscale=1;
image_yscale=1;
}
instance_destroy();
}

if place_meeting(x,y,par_HERO)
{
depth=-2;
}
else
{
depth=-11;
}

if (obj_camera_offset.x-1000 &lt; bbox_right) &amp;&amp; (obj_camera_offset.x + 1000 &gt; bbox_left) 
{
    if (obj_camera_offset.y-1000 &lt;y) &amp;&amp; (obj_camera_offset.y + 1000 &gt; y) 
    {
        if (!activate) {rest=false;}
        activate=true; 
    }
} //If in view - Activate 

//FREEZE BAT CONSUMER
if instance_exists(obj_Store)
dont_move=true;
else
dont_move=false;


if (!activate)
{
instance_deactivate_object(self);
}

if (activate)
{
var HERO = instance_nearest(x,y,par_Goodguy);

//Check Center Range
if (HERO.x&lt;x+30) &amp;&amp; (HERO.x&gt;x-30) center=true;else center=false;

//Check Fire Range

if (fire==false)
{
    if (HERO.x-100 &lt; bbox_right) &amp;&amp; (HERO.x + 100 &gt; bbox_left) &amp;&amp; (HERO.y-100 &lt; bbox_bottom) &amp;&amp; (HERO.x + 100 &gt; bbox_top)
    {    
    if(can_fire==true)
        {
        sprite_index=global.sprite[master.Bat_Consumer__Skinney_Fire_A];
        image_index=0;
        fire=true;
        }
    }
}
else //NOT IN FIRE RANGE
{
       
    if(sprite_index==global.sprite[master.Bat_Consumer__Skinney_Fire_A]) &amp;&amp; (image_index&gt;=sprite_get_number(sprite_index)-1)
        {
        fire=false;
        can_fire=false; 
        alarm[3]=irandom_range(100,200);
        }
}


//check direction
if (HERO.x &gt; x) 
{
if(!center) image_xscale = scale; 
if(!center) hsp=setspeed; else hsp = 0;
west_east = 1;}


if (HERO.x &lt; x) 
{
if(!center)image_xscale = -scale; 

if(!center) hsp=-setspeed; else hsp = 0;
west_east = 0;
}

if (HERO.y &gt; y) {vsp=setspeed/2;}
if (HERO.y &lt; y) {vsp=-setspeed/2;}

//Make Move Choice

if(moveChoose)
{
    moveChoice=irandom_range(1,2);
    alarm[1]=irandom_range(100,300)/global.game_speed;
    moveChoose=false;
    acel=0;
    float_up=true;
    float_factor=0;    
}

//Make Move

switch(moveChoice)
{
        
        case 1:
        if (acel&lt;1)    
            acel=acel+.01;
        vsp=vsp*acel;
        hsp=hsp*acel;
        break;

       
        case 2:
        hsp=hsp/2;
        
        
        if(float_up) float_factor=float_factor+.25;
        if(!float_up) float_factor=float_factor-.25;
        
        if(float_factor&gt;=3*scale) float_up=false;
        if(float_factor&lt;=-3*scale) float_up=true;
        vsp = float_factor;
         
        break;
        
        case 3:
        break;
        
               
        
}


//Change Sprite
if(fire) //FIRE START ---------------------------------------------------
{
hsp=0;
vsp=0;
acel=0;

sprite_index=global.sprite[master.Bat_Consumer__Skinney_Fire_A];
if(image_index==0) 
{
audio_sound_pitch(snd_FireBreath,global.game_speed);
audio_play_sound(snd_FireBreath,10,false);
}

if(image_index&gt;16) &amp;&amp; (image_index&lt;22) //CREATE FIRE
    {
    with instance_create(x+33*image_xscale,y-10*image_yscale,obj_Bat_Flame)
        { 
        //vspeed=3;
        //hspeed=other.image_xscale*3;
        scale=0+random(.25*image_yscale)
        
        if(other.image_xscale&gt;0)
            direction=330;
            else
            direction=210;
        }
    
    with instance_create(x+33*image_xscale,y-10*image_yscale,obj_Bat_Flame)
        { 
        //vspeed=4;
        //hspeed=other.image_xscale*4;
        scale=0+random(.5*image_yscale)
        
        if(other.image_xscale&gt;0)
            direction=330;
            else
            direction=210;
        
        }
    }
} //END FIRE ----------------------------------------------------
else
{
if(image_index==0) 
{
audio_sound_pitch(snd_BatFlap, random_range(.7,1.3)*global.game_speed);
audio_play_sound(snd_BatFlap,10,false);
}
if(!center) 
sprite_index=global.sprite[master.Bat_Consumer__Skinney_Fly_A];
else
sprite_index=global.sprite[master.Bat_Consumer__Skinney_Fly_B];
}

//Confirm Movement 


if (kickback!=0) //KICK BACK
{
    hsp=kickback;
    kickback = kickback - sign(kickback);
    if (HERO.y&gt;y)
        vsp=-2; else vsp=2;
}


 if (dont_move=true)
 {
 hsp=0;
 vsp=0;
 fire=false;
 can_fire=false; 
 alarm[3]=200;
 }


x=x+hsp*global.game_speed;
y=y+vsp*global.game_speed;
image_speed=.5*global.game_speed;

}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_Garbage_Collector">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hp=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="par_Shoot">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var shoot
shoot=instance_place(x,y,par_Shoot)
if (shoot==noone)
shoot=instance_nearest(x,y,par_Shoot)
if (shoot!=noone)
{

if place_meeting(x+hsp,y+vsp,obj_HERO_Melee)
    {
        if (obj_HERO_Melee.damage&gt;0)
        {
         
        if (alarm[2] &lt;=-1) alarm[2]=8;
        
     
        if (par_HERO.x&gt;x)
        kickback=-10+par_HERO.hsp; else kickback=10+par_HERO.hsp;
        hp=hp-obj_HERO_Melee.damage;
        
        if (alarm[0] &lt;=-1) 
        {   
        image_blend = c_red;
        alarm[0]=4;
        }
        
        }
    }
    else
    {
        //if (alarm[0]==-1) 
        hp=hp-shoot.damage;   
    
        if (alarm[0] &lt;=-1) 
        {   
        image_blend = c_red;
        alarm[0]=4; 
        }
    }

if place_meeting(x,y,obj_Flame_02)
{
    if (burn==false)
    {
    alarm[5]=50;
    burn=true;
    }
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (burn)
    {
    if (alarm[5]&gt;49)||(alarm[5]==40)||(alarm[5]==30)||(alarm[5]==20)||(alarm[5]==10)
    {
        burn_x = random_range(-.25,.25)*sprite_width*abs(image_xscale);
        burn_y = random_range(-.25,.25)*sprite_height*image_yscale;
        image_blend=c_red;
        
         with instance_create(x+burn_x,y+burn_y,obj_burn_damage)
            {
            image_xscale=other.image_yscale;
            image_yscale=other.image_yscale;
            }       
    }
    else
    {
    with instance_create(x+burn_x,y+burn_y,obj_burn)
        {
            image_xscale=other.image_yscale;
            image_yscale=other.image_yscale;
        }
    }
    }

    
if (blue)
{
    shader_set(shdr_blackandwhite);
    shader_set(shdr_Lurker);
    draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, image_yscale, image_angle, make_color_rgb(210,235,255), 1 );
    shader_reset();
}
else
{
   if sprite_exists(sprite_index) draw_self();
}

if (global.enemy_hp)
    {
    draw_rectangle_color(x,bbox_top-25,x+(init_hp),bbox_top-22,c_red,c_red,c_red,c_red,false);
    draw_rectangle_color(x,bbox_top-25,x+(hp),bbox_top-22,c_green,c_green,c_green,c_green,false);
    }

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>60,121</point>
    <point>121,121</point>
  </PhysicsShapePoints>
</object>
